AD stores credentials for use across the network
the server controlling AD services is the Domain Controller

core of the domain is Active Directory Domain Service, AD DS.  Contains all object info.

"security principals" = can be authenticated by the domain and be assigned privileges over resources

users are a type of "security principal"

users can be people or services

machines are another object and are also security principals.  machine accounts have more limited rights than users

machine accounts are local admins on the assigned computer.  Machine account passwords are automatically rotated out and are usually 120 random characters.

machine account ends in \$, ie, ``DC01$`` is the machine account for the machine DC01.

**Security Groups**
Can contain both machines and users, or even other groups

default groups:
Domain Admins - is what it sounds like
Server Operators - DC admins. cannot change admin group memberships
Backup Operators - allowed to access all files, used to perform backups
Account Operators - create/modify other accounts
Domain Users - all existing user accounts
Domain Computers - all existing computers
Domain Controllers - all existing DCs

Use ADUC to view OUs and objects

**User management**
rights can be delegated for users in individual OUs
deletion has to be enabled, objects and OUs are protected from accidental deletion by default
password reset:
PS> Set-ADAccountPassword <user> -Reset -NewPassword (Read-Host -AsSecureString -Prompt 'New Password') -Verbose
PS> Set-ADUser -ChangePasswordAtLogon $true -Identity <user> -Verbose

**GPO**
Group Policy Management tool
Create under Group Policy Objects, then link to OUs
GPOs apply recursively
settings tab shows configurations
GPOs distributed through a network share called SYSVOL.  points to C:\Windows\SYSVOL\sysvol\ on the DC
force GPO sync with ``gpupdate /force``

**Kerberos Auth**
auth based on assigning/holding tickets
1. user sends uname+encrypted timestamp (using key derived from passwd) to KDC
2. KDC creates and sends back TGT and session key (note: TGT is encrypted with krbtgt account's hash)
3. when user wants to connect to a service, TGT is used to ask KDC for TGS.  TGS is service-specific.
4. TGS is used to establish connection to specific service

**NetNTLM Auth**
legacy protocol.  challenge-response based.

**Trees, Forests, Trusts**
tree is multiple domains that connect together (ie, multiple business branches or business units, each with its own domain)
Enterprise Admins group grants admin privileges over whole tree
forest is union of several trees (ie, via company mergers)
trust relationships can be established throughout forest.
- one-way trust (trust direction is opposite of access direction) 
- two-way trust (mutual trust, default)